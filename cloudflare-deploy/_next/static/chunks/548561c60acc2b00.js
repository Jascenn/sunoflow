(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";var t=e.i(41866),r=e.i(74862),a=e.i(83948),s=e.i(22673),o=e.i(95403),l=e.i(67881),n=e.i(50691),i=e.i(60557),d=e.i(52594);let c=(0,d.default)("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),u=(0,d.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),p=(0,d.default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var h=e.i(47163),f=e.i(10708);function m({onGenerate:e,isGenerating:a}){let{t:d}=(0,s.useLanguage)(),[m,x]=(0,r.useState)("description"),g=r.default.useRef(null),[b,v]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[C,k]=(0,r.useState)("V3_5"),[S,R]=(0,r.useState)(!1),[E,P]=(0,r.useState)(!1),[D,T]=(0,r.useState)("å…¨éƒ¨"),L=async()=>{if(!("description"===m?b:y).trim()&&!S)return;let t={customMode:"custom"===m,instrumental:S,model:C,title:j||void 0};"description"===m?t.prompt=b:(t.prompt=y||"",t.style=b),await e(t)};return(0,t.jsxs)("div",{className:"relative group max-w-2xl mx-auto",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,t.jsxs)("div",{className:"bg-gray-100/80 p-1 rounded-lg inline-flex",children:[(0,t.jsxs)("button",{onClick:()=>x("description"),className:(0,h.cn)("px-4 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2","description"===m?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(n.Sparkles,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:d("generator.mode.description")})]}),(0,t.jsxs)("button",{onClick:()=>x("custom"),className:(0,h.cn)("px-4 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2","custom"===m?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(c,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:d("generator.mode.custom")})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden transition-shadow hover:shadow-md",children:[(0,t.jsxs)("div",{className:"px-5 py-3 border-b border-gray-100 flex items-center justify-between bg-gray-50/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:(0,h.cn)("p-1.5 rounded-md transition-colors",S?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-400"),children:(0,t.jsx)(i.Music,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("span",{className:(0,h.cn)("text-sm font-medium",S?"text-purple-700":"text-gray-700"),children:d("generator.instrumental")})})]}),(0,t.jsx)("button",{onClick:()=>R(!S),className:(0,h.cn)("w-11 h-6 rounded-full transition-colors relative focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",S?"bg-purple-600":"bg-gray-200"),children:(0,t.jsx)("span",{className:(0,h.cn)("block w-4 h-4 rounded-full bg-white shadow transform transition-transform absolute top-1",S?"left-6":"left-1")})})]}),(0,t.jsxs)("div",{className:"p-5 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(f.Label,{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"description"===m?d("generator.mode.description"):"custom"===m?d("generator.mode.custom"):"Lyrics"}),"custom"===m&&!S&&(0,t.jsxs)("button",{className:"text-xs text-blue-500 hover:text-blue-600 flex items-center gap-1",children:[(0,t.jsx)(n.Sparkles,{className:"w-3 h-3"}),d("generator.generate_lyrics")]})]}),"description"===m?(0,t.jsx)("textarea",{placeholder:d("generator.placeholder.desc"),value:b,onChange:e=>v(e.target.value),className:"w-full min-h-[100px] p-3 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all resize-none placeholder:text-gray-400"}):(0,t.jsx)("textarea",{placeholder:d(S?"generator.instrumental.desc":"generator.placeholder.lyrics"),value:y,onChange:e=>w(e.target.value),disabled:S,className:(0,h.cn)("w-full min-h-[160px] p-3 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all resize-y font-mono",S?"bg-gray-100 text-gray-400 cursor-not-allowed border-transparent":"bg-gray-50 border-gray-200 text-gray-800")})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:["custom"===m&&(0,t.jsxs)("div",{className:"space-y-1.5 animate-in fade-in slide-in-from-top-1",children:[(0,t.jsx)(f.Label,{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:d("generator.style")}),(0,t.jsx)("input",{placeholder:d("generator.placeholder.style"),value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]}),(0,t.jsxs)("div",{className:(0,h.cn)("space-y-1.5","description"===m&&"md:col-span-2"),children:[(0,t.jsx)(f.Label,{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:d("generator.title")}),(0,t.jsx)("input",{placeholder:d("generator.placeholder.title"),value:j,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-4 pt-2 border-t border-gray-100 mt-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(u,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:d("generator.model")}),(0,t.jsxs)("select",{value:C,onChange:e=>k(e.target.value),className:"bg-transparent font-medium text-gray-900 outline-none cursor-pointer hover:bg-gray-100 rounded px-1",children:[(0,t.jsx)("option",{value:"V3_5",children:"v3.5"}),(0,t.jsx)("option",{value:"V4",children:"v4.0"}),(0,t.jsx)("option",{value:"V4_5PLUS",children:"v4.5+"})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 bg-gray-50 border-t border-gray-200",children:[(0,t.jsx)("input",{type:"file",ref:g,className:"hidden",accept:"audio/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>0xa00000)return void o.toast.error("File size exceeds 10MB limit.");o.toast.success(`Audio uploaded: ${t.name}`,{duration:3e3})}}}),(0,t.jsxs)("button",{onClick:()=>{g.current?.click()},className:"text-xs font-medium text-gray-500 hover:text-gray-800 flex items-center gap-1.5 transition-colors group",children:[(0,t.jsx)("div",{className:"bg-gray-100 p-1 rounded-sm group-hover:bg-gray-200 transition-colors",children:(0,t.jsx)(p,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("span",{children:d("generator.upload_audio")})]}),(0,t.jsx)(l.Button,{onClick:L,disabled:a||!b.trim()&&!S&&!y.trim(),className:(0,h.cn)("h-9 px-6 text-sm font-semibold rounded-md shadow-sm transition-all",a?"opacity-70 cursor-not-allowed":"hover:translate-y-[-1px] hover:shadow-md"),style:{background:a?"#e5e7eb":"#37352f",color:a?"#9ca3af":"white"},children:a?(0,t.jsx)("span",{className:"flex items-center gap-2",children:d("generator.btn.generating")}):(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Sparkles,{className:"w-4 h-4"}),d("generator.btn.generate")]})})]})]})]})}var x=e.i(48239),g=e.i(67634);let b=(0,d.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var v=e.i(42181),y=e.i(33306),w=e.i(41862);let j=(0,d.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),N=(0,d.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),C=(0,d.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function k({status:e,progress:r}){let a=(e=>{if(!e)return 0;let t=parseFloat(e);return isNaN(t)?0:t>100?100:t})(r);return(0,t.jsxs)("div",{className:"mt-3 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 animate-pulse",children:"PENDING"===e?"ç­‰å¾…å¤„ç†...":"AI æ­£åœ¨åˆ›ä½œä¸­..."}),(0,t.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:r||"0%"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${a}%`}})})]})}var S=e.i(91967),R=e.i(34127),E=e.i(11623),P=e.i(19104),D=e.i(60600),T=e.i(4224),L=e.i(18814),_=e.i(48401),I=e.i(67264),A=e.i(39248),M=e.i(43430),O=e.i(14329),z=e.i(73772),H=e.i(36740),F="Dialog",[U,V]=(0,E.createContextScope)(F),[W,$]=U(F),B=e=>{let{__scopeDialog:a,children:s,open:o,defaultOpen:l,onOpenChange:n,modal:i=!0}=e,d=r.useRef(null),c=r.useRef(null),[u,p]=(0,D.useControllableState)({prop:o,defaultProp:l??!1,onChange:n,caller:F});return(0,t.jsx)(W,{scope:a,triggerRef:d,contentRef:c,contentId:(0,P.useId)(),titleId:(0,P.useId)(),descriptionId:(0,P.useId)(),open:u,onOpenChange:p,onOpenToggle:r.useCallback(()=>p(e=>!e),[p]),modal:i,children:s})};B.displayName=F;var G="DialogTrigger",X=r.forwardRef((e,r)=>{let{__scopeDialog:a,...s}=e,o=$(G,a),l=(0,R.useComposedRefs)(r,o.triggerRef);return(0,t.jsx)(A.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":eh(o.open),...s,ref:l,onClick:(0,S.composeEventHandlers)(e.onClick,o.onOpenToggle)})});X.displayName=G;var q="DialogPortal",[Y,K]=U(q,{forceMount:void 0}),Q=e=>{let{__scopeDialog:a,forceMount:s,children:o,container:l}=e,n=$(q,a);return(0,t.jsx)(Y,{scope:a,forceMount:s,children:r.Children.map(o,e=>(0,t.jsx)(I.Presence,{present:s||n.open,children:(0,t.jsx)(_.Portal,{asChild:!0,container:l,children:e})}))})};Q.displayName=q;var Z="DialogOverlay",J=r.forwardRef((e,r)=>{let a=K(Z,e.__scopeDialog),{forceMount:s=a.forceMount,...o}=e,l=$(Z,e.__scopeDialog);return l.modal?(0,t.jsx)(I.Presence,{present:s||l.open,children:(0,t.jsx)(et,{...o,ref:r})}):null});J.displayName=Z;var ee=(0,H.createSlot)("DialogOverlay.RemoveScroll"),et=r.forwardRef((e,r)=>{let{__scopeDialog:a,...s}=e,o=$(Z,a);return(0,t.jsx)(O.RemoveScroll,{as:ee,allowPinchZoom:!0,shards:[o.contentRef],children:(0,t.jsx)(A.Primitive.div,{"data-state":eh(o.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),er="DialogContent",ea=r.forwardRef((e,r)=>{let a=K(er,e.__scopeDialog),{forceMount:s=a.forceMount,...o}=e,l=$(er,e.__scopeDialog);return(0,t.jsx)(I.Presence,{present:s||l.open,children:l.modal?(0,t.jsx)(es,{...o,ref:r}):(0,t.jsx)(eo,{...o,ref:r})})});ea.displayName=er;var es=r.forwardRef((e,a)=>{let s=$(er,e.__scopeDialog),o=r.useRef(null),l=(0,R.useComposedRefs)(a,s.contentRef,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,z.hideOthers)(e)},[]),(0,t.jsx)(el,{...e,ref:l,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,S.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:(0,S.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,S.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),eo=r.forwardRef((e,a)=>{let s=$(er,e.__scopeDialog),o=r.useRef(!1),l=r.useRef(!1);return(0,t.jsx)(el,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||s.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,l.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let r=t.target;s.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),el=r.forwardRef((e,a)=>{let{__scopeDialog:s,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:n,...i}=e,d=$(er,s),c=r.useRef(null),u=(0,R.useComposedRefs)(a,c);return(0,M.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.FocusScope,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:n,children:(0,t.jsx)(T.DismissableLayer,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":eh(d.open),...i,ref:u,onDismiss:()=>d.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg,{titleId:d.titleId}),(0,t.jsx)(eb,{contentRef:c,descriptionId:d.descriptionId})]})]})}),en="DialogTitle",ei=r.forwardRef((e,r)=>{let{__scopeDialog:a,...s}=e,o=$(en,a);return(0,t.jsx)(A.Primitive.h2,{id:o.titleId,...s,ref:r})});ei.displayName=en;var ed="DialogDescription",ec=r.forwardRef((e,r)=>{let{__scopeDialog:a,...s}=e,o=$(ed,a);return(0,t.jsx)(A.Primitive.p,{id:o.descriptionId,...s,ref:r})});ec.displayName=ed;var eu="DialogClose",ep=r.forwardRef((e,r)=>{let{__scopeDialog:a,...s}=e,o=$(eu,a);return(0,t.jsx)(A.Primitive.button,{type:"button",...s,ref:r,onClick:(0,S.composeEventHandlers)(e.onClick,()=>o.onOpenChange(!1))})});function eh(e){return e?"open":"closed"}ep.displayName=eu;var ef="DialogTitleWarning",[em,ex]=(0,E.createContext)(ef,{contentName:er,titleName:en,docsSlug:"dialog"}),eg=({titleId:e})=>{let t=ex(ef),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return r.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},eb=({contentRef:e,descriptionId:t})=>{let a=ex("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return r.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},ev=e.i(29471);let ey=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(J,{ref:a,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r}));ey.displayName=J.displayName;let ew=r.forwardRef(({className:e,children:r,...a},s)=>(0,t.jsxs)(Q,{children:[(0,t.jsx)(ey,{}),(0,t.jsxs)(ea,{ref:s,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[r,(0,t.jsxs)(ep,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(ev.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));ew.displayName=ea.displayName;let ej=({className:e,...r})=>(0,t.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...r});ej.displayName="DialogHeader";let eN=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(ei,{ref:a,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",e),...r}));eN.displayName=ei.displayName,r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(ec,{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",e),...r})).displayName=ec.displayName;var eC=e.i(74123),ek=e.i(14744),eS=e.i(92762),eR=e.i(27069),eE="ScrollArea",[eP,eD]=(0,E.createContextScope)(eE),[eT,eL]=eP(eE),e_=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,type:o="hover",dir:l,scrollHideDelay:n=600,...i}=e,[d,c]=r.useState(null),[u,p]=r.useState(null),[h,f]=r.useState(null),[m,x]=r.useState(null),[g,b]=r.useState(null),[v,y]=r.useState(0),[w,j]=r.useState(0),[N,C]=r.useState(!1),[k,S]=r.useState(!1),E=(0,R.useComposedRefs)(a,e=>c(e)),P=(0,ek.useDirection)(l);return(0,t.jsx)(eT,{scope:s,type:o,dir:P,scrollHideDelay:n,scrollArea:d,viewport:u,onViewportChange:p,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:x,scrollbarXEnabled:N,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:k,onScrollbarYEnabledChange:S,onCornerWidthChange:y,onCornerHeightChange:j,children:(0,t.jsx)(A.Primitive.div,{dir:P,...i,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});e_.displayName=eE;var eI="ScrollAreaViewport",eA=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,children:o,nonce:l,...n}=e,i=eL(eI,s),d=r.useRef(null),c=(0,R.useComposedRefs)(a,d,i.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,t.jsx)(A.Primitive.div,{"data-radix-scroll-area-viewport":"",...n,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});eA.displayName=eI;var eM="ScrollAreaScrollbar",eO=r.forwardRef((e,a)=>{let{forceMount:s,...o}=e,l=eL(eM,e.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:i}=l,d="horizontal"===e.orientation;return r.useEffect(()=>(d?n(!0):i(!0),()=>{d?n(!1):i(!1)}),[d,n,i]),"hover"===l.type?(0,t.jsx)(ez,{...o,ref:a,forceMount:s}):"scroll"===l.type?(0,t.jsx)(eH,{...o,ref:a,forceMount:s}):"auto"===l.type?(0,t.jsx)(eF,{...o,ref:a,forceMount:s}):"always"===l.type?(0,t.jsx)(eU,{...o,ref:a}):null});eO.displayName=eM;var ez=r.forwardRef((e,a)=>{let{forceMount:s,...o}=e,l=eL(eM,e.__scopeScrollArea),[n,i]=r.useState(!1);return r.useEffect(()=>{let e=l.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),i(!0)},a=()=>{t=window.setTimeout(()=>i(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",a)}}},[l.scrollArea,l.scrollHideDelay]),(0,t.jsx)(I.Presence,{present:s||n,children:(0,t.jsx)(eF,{"data-state":n?"visible":"hidden",...o,ref:a})})}),eH=r.forwardRef((e,a)=>{var s;let{forceMount:o,...l}=e,n=eL(eM,e.__scopeScrollArea),i="horizontal"===e.orientation,d=e3(()=>u("SCROLL_END"),100),[c,u]=(s={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>s[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===c){let e=window.setTimeout(()=>u("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(e)}},[c,n.scrollHideDelay,u]),r.useEffect(()=>{let e=n.viewport,t=i?"scrollLeft":"scrollTop";if(e){let r=e[t],a=()=>{let a=e[t];r!==a&&(u("SCROLL"),d()),r=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[n.viewport,i,u,d]),(0,t.jsx)(I.Presence,{present:o||"hidden"!==c,children:(0,t.jsx)(eU,{"data-state":"hidden"===c?"hidden":"visible",...l,ref:a,onPointerEnter:(0,S.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,S.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),eF=r.forwardRef((e,a)=>{let s=eL(eM,e.__scopeScrollArea),{forceMount:o,...l}=e,[n,i]=r.useState(!1),d="horizontal"===e.orientation,c=e3(()=>{if(s.viewport){let e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;i(d?e:t)}},10);return e6(s.viewport,c),e6(s.content,c),(0,t.jsx)(I.Presence,{present:o||n,children:(0,t.jsx)(eU,{"data-state":n?"visible":"hidden",...l,ref:a})})}),eU=r.forwardRef((e,a)=>{let{orientation:s="vertical",...o}=e,l=eL(eM,e.__scopeScrollArea),n=r.useRef(null),i=r.useRef(0),[d,c]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=e0(d.viewport,d.content),p={...o,sizes:d,onSizesChange:c,hasThumb:!!(u>0&&u<1),onThumbChange:e=>n.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function h(e,t){return function(e,t,r,a="ltr"){let s=e1(r),o=t||s/2,l=r.scrollbar.paddingStart+o,n=r.scrollbar.size-r.scrollbar.paddingEnd-(s-o),i=r.content-r.viewport;return e5([l,n],"ltr"===a?[0,i]:[-1*i,0])(e)}(e,i.current,d,t)}return"horizontal"===s?(0,t.jsx)(eV,{...p,ref:a,onThumbPositionChange:()=>{if(l.viewport&&n.current){let e=e2(l.viewport.scrollLeft,d,l.dir);n.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollLeft=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollLeft=h(e,l.dir))}}):"vertical"===s?(0,t.jsx)(eW,{...p,ref:a,onThumbPositionChange:()=>{if(l.viewport&&n.current){let e=e2(l.viewport.scrollTop,d);n.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollTop=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollTop=h(e))}}):null}),eV=r.forwardRef((e,a)=>{let{sizes:s,onSizesChange:o,...l}=e,n=eL(eM,e.__scopeScrollArea),[i,d]=r.useState(),c=r.useRef(null),u=(0,R.useComposedRefs)(a,c,n.onScrollbarXChange);return r.useEffect(()=>{c.current&&d(getComputedStyle(c.current))},[c]),(0,t.jsx)(eG,{"data-orientation":"horizontal",...l,ref:u,sizes:s,style:{bottom:0,left:"rtl"===n.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===n.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":e1(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(n.viewport){var a,s;let o=n.viewport.scrollLeft+t.deltaX;e.onWheelScroll(o),a=o,s=r,a>0&&a<s&&t.preventDefault()}},onResize:()=>{c.current&&n.viewport&&i&&o({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:eJ(i.paddingLeft),paddingEnd:eJ(i.paddingRight)}})}})}),eW=r.forwardRef((e,a)=>{let{sizes:s,onSizesChange:o,...l}=e,n=eL(eM,e.__scopeScrollArea),[i,d]=r.useState(),c=r.useRef(null),u=(0,R.useComposedRefs)(a,c,n.onScrollbarYChange);return r.useEffect(()=>{c.current&&d(getComputedStyle(c.current))},[c]),(0,t.jsx)(eG,{"data-orientation":"vertical",...l,ref:u,sizes:s,style:{top:0,right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":e1(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(n.viewport){var a,s;let o=n.viewport.scrollTop+t.deltaY;e.onWheelScroll(o),a=o,s=r,a>0&&a<s&&t.preventDefault()}},onResize:()=>{c.current&&n.viewport&&i&&o({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:eJ(i.paddingTop),paddingEnd:eJ(i.paddingBottom)}})}})}),[e$,eB]=eP(eM),eG=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,sizes:o,hasThumb:l,onThumbChange:n,onThumbPointerUp:i,onThumbPointerDown:d,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:p,onResize:h,...f}=e,m=eL(eM,s),[x,g]=r.useState(null),b=(0,R.useComposedRefs)(a,e=>g(e)),v=r.useRef(null),y=r.useRef(""),w=m.viewport,j=o.content-o.viewport,N=(0,eC.useCallbackRef)(p),C=(0,eC.useCallbackRef)(c),k=e3(h,10);function E(e){v.current&&u({x:e.clientX-v.current.left,y:e.clientY-v.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;x?.contains(t)&&N(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,x,j,N]),r.useEffect(C,[o,C]),e6(x,k),e6(m.content,k),(0,t.jsx)(e$,{scope:s,scrollbar:x,hasThumb:l,onThumbChange:(0,eC.useCallbackRef)(n),onThumbPointerUp:(0,eC.useCallbackRef)(i),onThumbPositionChange:C,onThumbPointerDown:(0,eC.useCallbackRef)(d),children:(0,t.jsx)(A.Primitive.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:(0,S.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),v.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),E(e))}),onPointerMove:(0,S.composeEventHandlers)(e.onPointerMove,E),onPointerUp:(0,S.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),eX="ScrollAreaThumb",eq=r.forwardRef((e,r)=>{let{forceMount:a,...s}=e,o=eB(eX,e.__scopeScrollArea);return(0,t.jsx)(I.Presence,{present:a||o.hasThumb,children:(0,t.jsx)(eY,{ref:r,...s})})}),eY=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,style:o,...l}=e,n=eL(eX,s),i=eB(eX,s),{onThumbPositionChange:d}=i,c=(0,R.useComposedRefs)(a,e=>i.onThumbChange(e)),u=r.useRef(void 0),p=e3(()=>{u.current&&(u.current(),u.current=void 0)},100);return r.useEffect(()=>{let e=n.viewport;if(e){let t=()=>{p(),u.current||(u.current=e4(e,d),d())};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[n.viewport,p,d]),(0,t.jsx)(A.Primitive.div,{"data-state":i.hasThumb?"visible":"hidden",...l,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:(0,S.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;i.onThumbPointerDown({x:r,y:a})}),onPointerUp:(0,S.composeEventHandlers)(e.onPointerUp,i.onThumbPointerUp)})});eq.displayName=eX;var eK="ScrollAreaCorner",eQ=r.forwardRef((e,r)=>{let a=eL(eK,e.__scopeScrollArea),s=!!(a.scrollbarX&&a.scrollbarY);return"scroll"!==a.type&&s?(0,t.jsx)(eZ,{...e,ref:r}):null});eQ.displayName=eK;var eZ=r.forwardRef((e,a)=>{let{__scopeScrollArea:s,...o}=e,l=eL(eK,s),[n,i]=r.useState(0),[d,c]=r.useState(0),u=!!(n&&d);return e6(l.scrollbarX,()=>{let e=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(e),c(e)}),e6(l.scrollbarY,()=>{let e=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(e),i(e)}),u?(0,t.jsx)(A.Primitive.div,{...o,ref:a,style:{width:n,height:d,position:"absolute",right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:0,...e.style}}):null});function eJ(e){return e?parseInt(e,10):0}function e0(e,t){let r=e/t;return isNaN(r)?0:r}function e1(e){let t=e0(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function e2(e,t,r="ltr"){let a=e1(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,l=t.content-t.viewport,n=(0,eR.clamp)(e,"ltr"===r?[0,l]:[-1*l,0]);return e5([0,l],[0,o-a])(n)}function e5(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}var e4=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return!function s(){let o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,n=r.top!==o.top;(l||n)&&t(),r=o,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)};function e3(e,t){let a=(0,eC.useCallbackRef)(e),s=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(s.current),[]),r.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(a,t)},[a,t])}function e6(e,t){let r=(0,eC.useCallbackRef)(t);(0,eS.useLayoutEffect)(()=>{let t=0;if(e){let a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,r])}let e7=r.forwardRef(({className:e,children:r,...a},s)=>(0,t.jsxs)(e_,{ref:s,className:(0,h.cn)("relative overflow-hidden",e),...a,children:[(0,t.jsx)(eA,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(e8,{}),(0,t.jsx)(eQ,{})]}));e7.displayName=e_.displayName;let e8=r.forwardRef(({className:e,orientation:r="vertical",...a},s)=>(0,t.jsx)(eO,{ref:s,orientation:r,className:(0,h.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:(0,t.jsx)(eq,{className:"relative flex-1 rounded-full bg-border"})}));e8.displayName=eO.displayName;let e9=(0,d.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var te=e.i(35120);function tt({title:e,lyrics:a,trigger:s}){let[n,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1);return a?(0,t.jsxs)(B,{open:n,onOpenChange:i,children:[(0,t.jsx)(X,{asChild:!0,children:s||(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(j,{className:"w-3.5 h-3.5 text-gray-400"})})}),(0,t.jsxs)(ew,{className:"max-w-md max-h-[80vh] flex flex-col",children:[(0,t.jsx)(ej,{className:"border-b pb-4",children:(0,t.jsxs)(eN,{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xl",children:"ðŸŽµ"}),(0,t.jsx)("span",{className:"truncate max-w-[300px]",children:e})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden min-h-[300px] relative bg-gray-50/50 rounded-md mt-2",children:[(0,t.jsx)(e7,{className:"h-full w-full p-6",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap font-serif text-lg leading-relaxed text-gray-700 text-center",children:a})}),(0,t.jsx)("div",{className:"absolute top-4 right-4 flex gap-2",children:(0,t.jsx)("button",{onClick:()=>{a&&(navigator.clipboard.writeText(a),c(!0),o.toast.success("Lyrics copied to clipboard"),setTimeout(()=>c(!1),2e3))},className:"bg-white/90 hover:bg-white backdrop-blur shadow-sm border border-gray-200 p-2 rounded-md transition-all text-gray-500 hover:text-gray-900",title:"Copy Lyrics",children:d?(0,t.jsx)(te.Check,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(e9,{className:"w-4 h-4"})})})]})]})]}):null}var tr=e.i(31368),ta=e.i(73108);let ts="bg-[#fdeded] text-[#d44c47]";function to({tasks:e,onRefetch:a}){let n,d,{t:c}=(0,s.useLanguage)(),[u,p]=(0,r.useState)(new Set),{currentTrack:f,isPlaying:m,setTrack:S}=(0,ta.usePlayerStore)();if(0===e.length)return null;let R=(n=[],d=new Set,e.forEach(t=>{if(!d.has(t.id)&&!t.parentAudioId){let r=e.filter(e=>e.parentAudioId===t.id);n.push({parent:t,children:r}),d.add(t.id),r.forEach(e=>d.add(e.id))}}),e.forEach(e=>{e.parentAudioId&&!d.has(e.id)&&(n.push({parent:e,children:[]}),d.add(e.id))}),n),E=async(e,t)=>{if(e.stopPropagation(),t.audioUrl)try{let e=await tr.default.get(`/api/tasks/${t.id}/download`);e.data.downloadUrl&&window.open(e.data.downloadUrl,"_blank")}catch(e){o.toast.error("Download failed")}},P=async(e,t)=>{e.stopPropagation();try{await tr.default.post(`/api/tasks/${t.id}/favorite`),o.toast.success(t.isFavorite?"Removed from favorites":"Added to favorites"),a?.()}catch(e){o.toast.error("Failed to update favorite")}},D=async(e,t)=>{if(e.stopPropagation(),confirm("Are you sure you want to delete this task?"))try{o.toast.info("Delete functionality coming soon")}catch(e){o.toast.error("Delete failed")}},T=(e,r,a=!1)=>{var s;let o="COMPLETED"===e.status&&e.audioUrl,n=f?.id===e.id&&m;return(0,t.jsxs)("div",{className:(0,h.cn)("group relative flex items-start gap-4 py-3 px-2 rounded-sm transition-colors hover:bg-[rgba(55,53,47,0.03)]",a&&"ml-6 border-l border-gray-200 pl-4 py-2"),children:[(0,t.jsxs)("div",{className:"w-10 h-10 shrink-0 mt-1 rounded bg-gray-100 border border-gray-200 overflow-hidden relative cursor-pointer group/cover",onClick:()=>o&&void S(e),children:[e.imageUrl?(0,t.jsx)("img",{src:e.imageUrl,className:"w-full h-full object-cover",alt:""}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:(0,t.jsx)(i.Music,{className:"w-5 h-5"})}),o&&(0,t.jsx)("div",{className:(0,h.cn)("absolute inset-0 bg-black/20 flex items-center justify-center transition-opacity",m?"opacity-100 bg-black/40":"opacity-0 group-hover/cover:opacity-100"),children:n?(0,t.jsx)(w.Pause,{className:"w-5 h-5 text-white drop-shadow-sm",fill:"white"}):(0,t.jsx)(y.Play,{className:"w-5 h-5 text-white drop-shadow-sm",fill:"white"})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 grid gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-[#37352f] truncate select-text",children:r?`${e.title||"Generated Track"} (${r})`:e.title||"Generated Track"}),(e=>{switch(e){case"COMPLETED":return(0,t.jsx)("span",{className:"notion-badge bg-[#eff9f1] text-[#2b713f]",children:c("task.status.completed")});case"FAILED":return(0,t.jsx)("span",{className:`notion-badge ${ts}`,children:c("task.status.failed")});case"PROCESSING":case"PENDING":return(0,t.jsx)("span",{className:"notion-badge bg-[#e7f3f8] text-[#2c7cb0]",children:c("task.status.generating")});default:return(0,t.jsx)("span",{className:"notion-badge bg-[#f1f1ef] text-[#5a5a5a]",children:e})}})(e.status),(0,t.jsxs)("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[o&&(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-500 hover:text-gray-900",onClick:t=>E(t,e),title:c("task.action.download"),children:(0,t.jsx)(x.Download,{className:"w-3.5 h-3.5"})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:(0,h.cn)("h-6 w-6 text-gray-500 hover:text-red-500",e.isFavorite&&"text-red-500"),onClick:t=>P(t,e),title:c("task.action.favorite"),children:(0,t.jsx)(N,{className:(0,h.cn)("w-3.5 h-3.5",e.isFavorite&&"fill-current")})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-500 hover:text-red-600",onClick:t=>D(t,e),title:c("task.action.delete"),children:(0,t.jsx)(C,{className:"w-3.5 h-3.5"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-[rgba(55,53,47,0.65)] h-5",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),e.model||"v3"]}),e.duration&&(0,t.jsxs)("span",{className:"font-mono",children:[Math.floor(e.duration),"s"]}),e.tags&&(0,t.jsx)("span",{className:"flex-shrink-0 bg-[rgba(55,53,47,0.03)] px-1.5 rounded text-[11px] leading-relaxed",children:e.tags}),(0,t.jsxs)("span",{className:"font-mono opacity-50 flex items-center gap-2",children:[(e.prompt||e.tags)&&(0,t.jsx)(tt,{title:e.title||"Lyrics",lyrics:e.prompt,trigger:(0,t.jsxs)("button",{className:"hover:text-[#37352f] transition-colors flex items-center gap-1 ml-2",title:"View Lyrics",children:[(0,t.jsx)(j,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden group-hover:inline",children:c("task.action.lyrics")})]})}),(0,t.jsx)("span",{className:"ml-2",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"text-sm mt-2",children:[e.prompt&&(0,t.jsx)("p",{className:"text-[rgba(55,53,47,0.85)] line-clamp-3 hover:line-clamp-none transition-all cursor-text font-serif italic text-xs leading-relaxed bg-stone-50 px-2.5 py-2 rounded border border-stone-200 shadow-sm mt-1",children:e.prompt}),"FAILED"===e.status&&(0,t.jsxs)("div",{className:`mt-2 p-2 rounded text-xs flex items-center gap-2 ${ts}`,children:[(0,t.jsx)(g.XCircle,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:{SENSITIVE_WORD:"å†…å®¹æ•æ„Ÿ",TIMEOUT:"ç”Ÿæˆè¶…æ—¶",NETWORK_ERROR:"ç½‘ç»œé”™è¯¯",AI_ERROR:"API é”™è¯¯"}[s=e.failReason||"Unknown"]||s}),(0,t.jsxs)("span",{children:["ðŸ’° ",c("task.refunded")]})]}),("PROCESSING"===e.status||"PENDING"===e.status)&&(0,t.jsx)("div",{className:"mt-2 text-xs",children:(0,t.jsx)(k,{status:e.status,progress:e.progress})})]})]})]},e.id)};return(0,t.jsx)("div",{className:"space-y-6",children:R.map(e=>{let r=e.children.length>0,a=u.has(e.parent.id),s=1+e.children.length;return(0,t.jsx)("div",{className:"border-b border-gray-100 pb-4 last:border-0 hover:border-gray-200 transition-colors",children:r?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer hover:bg-[rgba(55,53,47,0.03)] -ml-2 p-1 rounded select-none mb-1",onClick:()=>{var t;let r;return t=e.parent.id,void((r=new Set(u)).has(t)?r.delete(t):r.add(t),p(r))},children:[(0,t.jsx)("div",{className:"w-5 h-5 flex items-center justify-center text-gray-400",children:a?(0,t.jsx)(b,{className:"w-4 h-4"}):(0,t.jsx)(v.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"font-medium text-[#37352f] text-sm flex items-center gap-2",children:[e.parent.title||"Untitled Collection",(0,t.jsxs)("span",{className:"text-[10px] font-normal text-gray-400 border border-gray-200 px-1 rounded bg-white",children:[s," ",c("task.items_count")]})]})]}),a&&(0,t.jsxs)("div",{className:"mb-2",children:[T(e.parent,"Version 1",!0),e.children.map((e,t)=>T(e,`Version ${t+2}`,!0))]}),!a&&(0,t.jsx)("div",{className:"ml-6 pl-4 border-l border-gray-200 opacity-60",children:(0,t.jsx)("div",{className:"text-xs text-gray-400 truncate font-serif italic",children:e.parent.prompt})})]}):T(e.parent)},e.parent.id)})})}var tl=e.i(64891),tn=e.i(49533),ti=e.i(67937),td=e.i(65253),tc=e.i(10900);let tu=(0,d.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var tp=e.i(84943),th=e.i(3742);let tf=[{id:"ambient-1",category:"æ°›å›´éŸ³ä¹",title:"å¤æ—¥æµ·æ»©",prompt:"å¤æ—¥æµ·æ»©æ°›å›´éŸ³ä¹ï¼Œè½»æ¾æ„‰å¿«çš„æ—‹å¾‹ï¼Œæµ·æµªå£°ä½œä¸ºèƒŒæ™¯ï¼Œæ¸©æš–çš„å‰ä»–å’Œé’¢ç´",tags:"æµ·æ»©, è½»æ¾, æ°›å›´éŸ³ä¹, å¤æ—¥",description:"é€‚åˆæ”¾æ¾ã€å†¥æƒ³æˆ–å·¥ä½œèƒŒæ™¯éŸ³ä¹"},{id:"ambient-2",category:"æ°›å›´éŸ³ä¹",title:"é›¨å¤œå’–å•¡é¦†",prompt:"ä¸‹é›¨å¤©çš„å’–å•¡é¦†æ°›å›´éŸ³ä¹ï¼Œæ¸©æŸ”çš„é’¢ç´æ—‹å¾‹ï¼Œé›¨å£°å’Œå’–å•¡æœºçš„å£°éŸ³ä½œä¸ºèƒŒæ™¯",tags:"é›¨å¤©, å’–å•¡é¦†, é’¢ç´, æ¸©æŸ”",description:"è¥é€ æ¸©é¦¨èˆ’é€‚çš„æ°›å›´"},{id:"ambient-3",category:"æ°›å›´éŸ³ä¹",title:"æ·±å¤œå­¦ä¹ ",prompt:"æ·±å¤œå­¦ä¹ ä¸“æ³¨éŸ³ä¹ï¼ŒLo-Fi hip hopèŠ‚å¥ï¼Œæ¸©æš–çš„åˆæˆå™¨padï¼Œvinylå”±ç‰‡è´¨æ„Ÿ",tags:"Lo-Fi, å­¦ä¹ , ä¸“æ³¨, æ·±å¤œ",description:"å¸®åŠ©é›†ä¸­æ³¨æ„åŠ›çš„èƒŒæ™¯éŸ³ä¹"},{id:"electronic-1",category:"ç”µå­éŸ³ä¹",title:"èµ›åšæœ‹å…‹ä¹‹åŸŽ",prompt:"èµ›åšæœ‹å…‹é£Žæ ¼ç”µå­éŸ³ä¹ï¼Œå……æ»¡æœªæ¥æ„Ÿçš„åˆæˆå™¨éŸ³è‰²ï¼Œå¼ºåŠ²çš„ä½ŽéŸ³ï¼Œéœ“è™¹ç¯èˆ¬çš„æ°›å›´",tags:"èµ›åšæœ‹å…‹, ç”µå­, æœªæ¥æ„Ÿ, åˆæˆå™¨",description:"ç§‘å¹»æ„Ÿåè¶³çš„ç”µå­éŸ³ä¹"}].map((e,t)=>({...e,coverColor:["bg-pink-100","bg-blue-100","bg-purple-100","bg-orange-100"][t%4]}));function tm(){let{user:e,isLoaded:l}=(0,a.useUser)(),{t:i}=(0,s.useLanguage)(),d=(0,th.useSearchParams)(),c="favorites"===d.get("filter")?"favorites":"all",u=d.get("filter")?"library":"create",{data:p,isLoading:f,refetch:x}=(0,tl.useQuery)({queryKey:["tasks"],queryFn:async()=>(await tr.default.get("/api/tasks")).data,refetchInterval:e=>{let t=e.state.data;return!!t?.tasks?.some(e=>"PENDING"===e.status||"PROCESSING"===e.status)&&3e3},staleTime:2e3}),[g,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(c);(0,r.useEffect)(()=>{w("favorites"===d.get("filter")?"favorites":"all")},[d]);let{data:j,refetch:N}=(0,tl.useQuery)({queryKey:["wallet"],queryFn:async()=>(await tr.default.get("/api/wallet")).data,enabled:!!e}),C=async e=>{try{b(!0);let t=await tr.default.post("/api/generate",e);t.data.success&&(o.toast.success("Generated successfully!",{description:`Balance: ${t.data.balance} credits`}),x(),N())}catch(e){console.error("Generation error:",e),e.response?.status===402?o.toast.error("Insufficient Credits",{description:"Need 5 credits.",action:{label:"Top Up",onClick:()=>window.location.href="/account/billing"}}):o.toast.error("Failed",{description:e.response?.data?.error||e.message})}finally{b(!1)}},k=async()=>{try{o.toast.info("Syncing tasks...",{description:"Fetching from Suno API"});let e=await tr.default.post("/api/sync-tasks");if(e.data.success){let{stats:t}=e.data;o.toast.success("Sync complete",{description:`Created ${t.created}, Updated ${t.updated}`}),x()}}catch(e){console.error("Sync error:",e),o.toast.error("Sync failed",{description:e.response?.data?.details||e.message})}},S=p?.tasks?.filter(e=>"favorites"!==v||e.isFavorite)||[];return(0,t.jsxs)("div",{className:"flex h-full w-full bg-white text-stone-900 font-sans",children:["create"===u&&(0,t.jsxs)("aside",{className:"w-[420px] border-r border-stone-200 h-full flex flex-col bg-white",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-stone-100 bg-white sticky top-0 z-10 flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"font-bold text-xl flex items-center gap-2 tracking-tight",children:[(0,t.jsx)(n.Sparkles,{className:"w-5 h-5 text-black"}),i("dashboard.create")]}),(0,t.jsx)("div",{className:"text-xs font-medium text-stone-400 bg-stone-50 px-2 py-1 rounded-md",children:"V3.5 / V4"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:(0,t.jsx)(m,{onGenerate:C,isGenerating:g})})]}),(0,t.jsxs)("main",{className:"flex-1 h-full overflow-y-auto bg-stone-50/50 relative",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-20 bg-white/80 backdrop-blur-xl border-b border-stone-200 px-8 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:i("library"===u?"sidebar.library":"dashboard.title")}),(0,t.jsx)("p",{className:"text-xs text-stone-500 font-medium",children:i("dashboard.subtitle")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)(tp.default,{href:"/recharge",className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full border border-stone-200 shadow-sm hover:border-stone-300 hover:shadow transition-all",children:[(0,t.jsx)(td.Coins,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,t.jsx)("span",{className:"font-bold text-stone-900",children:j?.wallet?.balance??"..."})]}),(0,t.jsx)("button",{onClick:k,className:"hover:bg-stone-100 p-2 rounded-full transition-colors text-stone-400 hover:text-stone-700",title:"Sync Status",children:(0,t.jsx)(tc.RefreshCw,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>window.__openUserPanel?.(),className:"flex items-center gap-2 pl-2 focus:outline-none",children:(0,t.jsx)("div",{className:"w-9 h-9 rounded-full overflow-hidden border border-stone-200 ring-2 ring-white shadow-sm bg-stone-100 hover:ring-stone-300 transition-all",children:e?.imageUrl?(0,t.jsx)("img",{src:e.imageUrl,alt:"Me",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-stone-400",children:(0,t.jsx)(ti.User,{className:"w-4 h-4"})})})})]})]}),(0,t.jsxs)("div",{className:(0,h.cn)("p-8 mx-auto space-y-12","library"===u?"max-w-7xl":"max-w-6xl"),children:["create"===u&&!p?.tasks?.length&&(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)(tu,{className:"w-4 h-4 text-yellow-500"}),(0,t.jsx)("h3",{className:"font-bold text-stone-900 text-sm uppercase tracking-wider",children:i("dashboard.start_style")})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:tf.map((e,r)=>(0,t.jsxs)("div",{className:"group relative aspect-[4/3] rounded-2xl overflow-hidden cursor-pointer shadow-sm hover:shadow-md transition-all border border-stone-100 bg-white",onClick:()=>o.toast.info("Auto-fill not implemented yet",{description:"Copy style manually for now."}),children:[(0,t.jsx)("div",{className:(0,h.cn)("absolute inset-0 opacity-20 transition-opacity group-hover:opacity-30",e.coverColor)}),(0,t.jsxs)("div",{className:"absolute inset-0 p-5 flex flex-col justify-between",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-50 bg-white/50 w-fit px-2 py-1 rounded backdrop-blur-sm",children:e.category}),(0,t.jsx)("h3",{className:"font-bold text-stone-900 text-lg leading-tight group-hover:translate-x-1 transition-transform",children:e.title})]}),(0,t.jsx)("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-all translate-y-2 group-hover:translate-y-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-black rounded-full flex items-center justify-center text-white",children:(0,t.jsx)(y.Play,{className:"w-3 h-3 fill-current ml-0.5"})})})]},r))})]}),(0,t.jsxs)("section",{className:"min-h-[400px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-8 border-b border-stone-200",children:[(0,t.jsx)("button",{onClick:()=>w("all"),className:(0,h.cn)("text-sm font-semibold pb-3 transition-all relative","all"===v?"text-black after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-black":"text-stone-500 hover:text-stone-800"),children:i("dashboard.all_songs")}),(0,t.jsx)("button",{onClick:()=>w("favorites"),className:(0,h.cn)("text-sm font-semibold pb-3 transition-all relative","favorites"===v?"text-red-500 after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-red-500":"text-stone-500 hover:text-stone-800"),children:i("dashboard.favorites")})]}),f?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 text-stone-400 gap-4",children:[(0,t.jsx)(tn.Loader2,{className:"w-8 h-8 animate-spin text-stone-300"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:i("dashboard.fetching")})]}):S.length>0?(0,t.jsx)("div",{className:"bg-white rounded-2xl border border-stone-200 shadow-sm overflow-hidden",children:(0,t.jsx)(to,{tasks:S,onRefetch:x})}):(0,t.jsxs)("div",{className:"py-32 text-center rounded-3xl bg-stone-50 border border-dashed border-stone-200",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 text-3xl shadow-sm border border-stone-100",children:"favorites"===v?"ðŸ’•":"ðŸŽ¹"}),(0,t.jsx)("h3",{className:"font-bold text-stone-900 text-lg",children:i("favorites"===v?"dashboard.empty_fav.title":"dashboard.empty.title")}),(0,t.jsx)("p",{className:"text-stone-500 mt-2 max-w-sm mx-auto",children:i("favorites"===v?"dashboard.empty_fav.desc":"dashboard.empty.desc")})]})]})]})]})]})}function tx(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,t.jsx)(tn.Loader2,{className:"animate-spin w-8 h-8 text-gray-400"})}),children:(0,t.jsx)(tm,{})})}e.s(["default",()=>tx],78928)}]);